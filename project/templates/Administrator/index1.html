{% extends 'Administrator/base.html' %}
{% load staticfiles %}


{% block body %}
<body>
  <section id="container">
    <!-- **********************************************************************************************************************************************************
        TOP BAR CONTENT & NOTIFICATIONS
        *********************************************************************************************************************************************************** -->
    <!--header start-->
{% include 'Administrator/header.html' %}
    <!--header end-->
    <!-- **********************************************************************************************************************************************************
        MAIN SIDEBAR MENU
        *********************************************************************************************************************************************************** -->
    <!--sidebar start-->
{% include 'Administrator/sidebar.html' %}
    <!--sidebar end-->
    <!-- **********************************************************************************************************************************************************
        MAIN CONTENT
        *********************************************************************************************************************************************************** -->
    <!--main content start-->
    <section id="main-content">
      <section class="wrapper">
        <div class="row">
          <div class="col-lg-12 main-chart">



          </div>
          <!-- /col-lg-9 END SECTION MIDDLE -->
          <!-- **********************************************************************************************************************************************************
              RIGHT SIDEBAR CONTENT
              *********************************************************************************************************************************************************** -->

        </div>
        <!-- /row -->


<div class="row">
            <div class="col-md-12">
            <div class="content-panel table-responsive">
              <table class="table table-striped table-advance table-hover">
                <h4>  MY ITEMS <span id='loading' style='display:none; color:green' >Loading...</span> </h4>
                     <hr>
                <thead>
                  <tr>
                    <th><!-- <i class="fa fa-user"></i> --> CATRGORY</th>

                  </tr>
                </thead>{% csrf_token %}
                <tbody id="tablebody">
                {% for i in category %}
                  <tr class="post{{i.pk}}" name=''>
                    <td>
                      <a id="category{{i.pk}}" onclick='subCategoryDetails("{{i.name}}", "{{i.id}}")' data-toggle="collapse" data-target="#demo{{i.id}}" style='cursor:pointer'>{{i.name}} <span style='float:right;' id='totalcategory{{i.id}}'>{{i.total_count}}</span></a>
                        <!--<button data-toggle="collapse" data-target="#demo">Collapsible</button>-->

                        <div id="demo{{i.id}}" class="collapse">

                            <div class='row'>
                                <div class='col-md-6 md-offset-3' style='margin-left:30px;'>
                                    <hr>
                                    <h6><b>Sub Category</b></h6>
                                 {% for a in subcategory %}

                            {% if a.mycategory == i %}
                            <a data-toggle="collapse" data-target="#demo1{{a.id}}{{i.id}}" style='cursor:pointer' onclick='sexDetails("{{i.name}}", "{{a.name}}", "{{i.id}}", "{{a.id}}")' >{{a}} <span style='float:right;' id='{{a.id}}'>{{a.total_count}}</span></a><br><br>

                            {% endif %}
                                <div id="demo1{{a.id}}{{i.id}}" class="collapse" style='margin-left:30px;'>
                                <h6 style='color:green'><b>Select Sex</b></h6>
                                <p style='color:green;cursor:pointer' data-toggle="collapse" data-target="#sizem{{a.id}}{{i.id}}"  onclick='categoryChange("{{i.name}}", "{{a.name}}", "M", "{{i.id}}{{a.id}}")'>M <span style='float:right;' id="sexm{{i.id}}{{a.id}}">0</span> </p>
                                <p style='color:green;cursor:pointer' data-toggle="collapse" data-target="#sizef{{a.id}}{{i.id}}" onclick='categoryChange("{{i.name}}", "{{a.name}}", "F", "{{i.id}}{{a.id}}")'>F <span style='float:right;' id="sexf{{i.id}}{{a.id}}">0</span> </p>

                                    <div id="sizem{{a.id}}{{i.id}}" class="collapse" style='margin-left:60px;'>
                                        <h6><b>Select Size For Male</b></h6>
<div class="table-responsive">
<table class="table table-borderless">
<thead>
<tr>
<th>Size</th>
<th>item(s)</th>
<th>Add</th>
</tr>
</thead>
<tbody>
<tr>
<td>S</td>
<td id='sm{{i.id}}{{a.id}}'>0</td>
<td><button class='btn btn-sm btn-success' data-toggle="modal" data-target="#myModal3" onclick='AddItems1("{{i.name}}","{{i.id}}", "{{a.name}}", "{{a.id}}", "s", "m")'> Add</button></td>
</tr>
<tr>
<td>M</td>
<td id='mm{{i.id}}{{a.id}}'>0</td>
<td><button class='btn btn-sm btn-success' data-toggle="modal" data-target="#myModal3" onclick='AddItems1("{{i.name}}","{{i.id}}", "{{a.name}}", "{{a.id}}", "m", "m")'>Add</button></td>
</tr>

<tr>
<td>L</td>
<td id='lm{{i.id}}{{a.id}}'>0</td>
<td><button class='btn btn-sm btn-success' data-toggle="modal" data-target="#myModal3" onclick='AddItems1("{{i.name}}","{{i.id}}", "{{a.name}}", "{{a.id}}", "l", "m")'>Add</button></td>
</tr>
<tr>
<td>XL</td>
<td id='xlm{{i.id}}{{a.id}}'>0</td>
<td><button class='btn btn-sm btn-success' data-toggle="modal" data-target="#myModal3" onclick='AddItems1("{{i.name}}","{{i.id}}", "{{a.name}}", "{{a.id}}", "xl", "m")'>Add</button></td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="sizef{{a.id}}{{i.id}}" class="collapse" style='margin-left:60px;'>
<h6><b>Details For Female</h6>

<div class="table-responsive">
<table class="table table-borderless">
<thead>
<tr>
<th>Size</th>
<th>item(s)</th>
<th>Add</th>
</tr>
</thead>
<tbody>
<tr>
<td>S</td>
<td id='sf{{i.id}}{{a.id}}'>0</td>
<td><button class='btn btn-sm btn-success' data-toggle="modal" data-target="#myModal3" onclick='AddItems1("{{i.name}}", "{{i.id}}", "{{a.name}}", "{{a.id}}", "s", "f")'>Add</button></td>
</tr>
<tr>
<td>M</td>
<td id='mf{{i.id}}{{a.id}}'>0</td>
<td><button class='btn btn-sm btn-success' data-toggle="modal" data-target="#myModal3" onclick='AddItems1("{{i.name}}", "{{i.id}}", "{{a.name}}", "{{a.id}}", "m", "f")'>Add</button></td>
</tr>

<tr>
<td>L</td>
<td id='lf{{i.id}}{{a.id}}'>0</td>
<td><button class='btn btn-sm btn-success' data-toggle="modal" data-target="#myModal3" onclick='AddItems1("{{i.name}}", "{{i.id}}", "{{a.name}}", "{{a.id}}", "l", "f")'>Add</button></td>
</tr>
<tr>
<td>XL</td>
<td id='xlf{{i.id}}{{a.id}}'>0</td>
<td><button class='btn btn-sm btn-success' data-toggle="modal" data-target="#myModal3" onclick='AddItems1("{{i.name}}", "{{i.id}}", "{{a.name}}", "{{a.id}}", "xl", "f")'>Add</button></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
                              {% endfor %}

                              </div>
                              </div>


                        </div>
                    </td>

                  </tr>

                {% endfor %}
                </tbody>
              </table>
              <button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal2">Add Item</button>

            </div>
            <!-- /content-panel -->
          </div>
          <!-- /col-md-12 -->
</div>
<!-- end of row -->




            <!-- The Modal -->
<div class="modal" id="myModal">
  <div class="modal-dialog full-screen">
    <div class="modal-content">
   <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title">Myitem Details</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <!-- Modal body -->
      <div class="modal-body">


<div class="container-fluid">
  <div class="row">

  <div class="col-md-12">


<form> {% csrf_token %}
<center><h3 id="edititemscategory"></h3></center>
  <div class="form-group">
  <label for="editavail">Goods available</label>
  <input type="text" class="form-control" name="" id="editavail">
  </div>



</form>



  </div>

  </div>
</div>

      </div>

      <!-- Modal footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary editsubmitbutton" data-dismiss="modal" onclick="editMyItems(this.id)" id="">Submit</button>
      </div>

    </div>
  </div>
</div> <!-- end of modal -->








            <!-- The Modal -->
<div class="modal" id="myModal2">
  <div class="modal-dialog full-screen">
    <div class="modal-content">
   <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title">Add Item</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <!-- Modal body -->
      <div class="modal-body">


<div class="container-fluid">
  <div class="row">

  <div class="col-md-12">


<form>


<div class="form-group">
<label for="select_class">Category:</label>
<select class="form-control" id="add_select_category">
{% for i in category %}
<option>{{i.name}}</option>
{% endfor %}
</select>
</div>

<div class="form-group">
<label for="select_class">SubCategory:</label>
<select class="form-control" id="add_sub_category">
{% for i in subcategory %}
<option>{{i.name}}</option>
{% endfor %}
</select>
</div>



  <div class="form-group">
  <label for="description">Sex</label>
  <!--<input type="text" class="form-control" name="" id="additemdescription">-->

  <select class="form-control" id="additemdescription">
    <option>M</option>
    <option>F</option>

  </select>
  </div>

 <div class="form-group">
  <label for="description">Size</label>
  <!--<input type="text" class="form-control" name="" id="additemdescription">-->

  <select class="form-control" id="additemsize">
    <option>S</option>
    <option>M</option>
    <option>L</option>
    <option>XL</option>


  </select>
  </div>

<!--<div class="form-group">-->
<!--<label for="size">Size</label>-->
<!--<input type="text" class="form-control" name="" id="additemsize">-->
<!--</div>-->

  <div class="form-group">
  <label for="price">Price</label>
  <input type="text" class="form-control" name="" value=1000 id="additemprice">
  </div>

  <div class="form-group">
  <label for="available">Stock available</label>
  <input type="text" class="form-control" name="" value=0 id="additemavailable">
  </div>

</form>



  </div>

  </div>
</div>

      </div>

      <!-- Modal footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" data-dismiss="modal" id="submititem" onclick="addItems()">Submit</button>

      </div>

    </div>
  </div>
</div> <!-- end of modal -->





            <!-- The Modal -->
<div class="modal" id="myModal3">
  <div class="modal-dialog full-screen">
    <div class="modal-content">
   <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title">Add Item</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <!-- Modal body -->
      <div class="modal-body">


<div class="container-fluid">
  <div class="row">

  <div class="col-md-12">


<form>
  <div class="form-group">
  <label for="available">Stock available</label>
  <input type="text" class="form-control" name="" id="editstock">
  <p id='editcategoryid' style='display:none'></p>
  <p id='editsubcategoryid' style='display:none'></p>
  <p id='editsex' style='display:none'></p>
  <p id='editsize' style='display:none'></p>


  </div>

</form>



  </div>

  </div>
</div>

      </div>

      <!-- Modal footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" data-dismiss="modal" id="submititem" onclick="editMyItems1()">Submit</button>

      </div>

    </div>
  </div>
</div> <!-- end of modal -->







      </section>
    </section>
    <!--main content end-->

  </section>
  <!-- js placed at the end of the document so the pages load faster -->





<script>



list1 = []
categorylist = []
subcategorylist = []


{% for i in totalitems %}
dict1 = {'category':'{{i.category}}', 'subcategory': '{{i.subcategory}}', 'sex': '{{i.sex}}', 'size':'{{i.size}}', 'price':'{{i.price}}', 'stock':'{{i.stock}}', 'id':'{{i.id}}', 'subcategoryid':'{{i.subcategory.id}}'}
list1.push(dict1)
{% endfor %}

{% for i in category %}
dict2 = {'category':'{{i.name}}', 'categoryid':'{{i.id}}'}
categorylist.push(dict2)
{% endfor %}

{% for i in subcategory %}
dict3 = {'category':'{{i.mycategory.name}}', 'categoryid':'{{i.mycategory.id}}', 'subcategory':'{{i.name}}', 'subcategoryid':'{{i.id}}'}
subcategorylist.push(dict3)
{% endfor %}


// console.log(categorylist)
// console.log(list1)
console.log(subcategorylist)





// console.log(list1)
for (i=0;i<categorylist.length;i++){
    for (a=0; a<list1.length; a++){
        if(categorylist[i].category == list1[a].category ){
            // amount = 0
            amount = Number(list1[i].stock)
            // data = '#totalcategory'+categorylist[i].categoryid

            // totalcategory = document.querySelector(data).innerHTML
            // console.log(totalcategory, amount, list1[i].category, list1[i].subcategory)
            // document.querySelector(data).innerHTML = Number(totalcategory) + amount
            //console.log(amount)
            //console.log(categorylist[i].category, list1[i].category, data, totalcategory, amount)


        }
    // totalcategory1 = ''

    }
}


function subCategoryDetails(category, categoryid){
    // totalsubcategory = '#totalsubcategory'+categoryid
    // totalsubcategory = document.querySelector(totalsubcategory).innerHTML

    // for(i=0; i<list1.length; i++){
        // console.log(list1[i])
        subcategorylist1 = []
        for(a=0; a<subcategorylist.length; a++){
            if (subcategorylist[a].category == category){
                //if(list1[i].category == category){
                    dict = {'category':subcategorylist[a].category, 'subcategory':subcategorylist[a].subcategory}
                   subcategorylist1.push(dict)
                    // console.log('yeahhh',subcategorylist1)
               // }


            }//endif

        } //endfor

            newlist = []
            newlist2 = []
        for(i=0;i<list1.length;i++){


            dict11 = {'category':list1[i].category, 'subcategory':list1[i].subcategory}
            list2 = [dict11]
            // console.log('yaaa', list2)

            for(a=0; a<subcategorylist1.length; a++){
                // console.log(list1[i], 'andd', subcategorylist1[a] )

            if (list1[i].subcategory == subcategorylist1[a].subcategory ){
                // console.log('yeahhhhhhhh', list1[i].subcategory, subcategorylist1[a].subcategory )
                // totalsubcategory = '#totalsubcategory'+list1[i].subcategoryid
                // qs = document.querySelector(totalsubcategory).innerHTML
                // qs = Number(qs) + Number(list1[i].stock)
                // console.log(qs, Number(list1[i].stock))
            }

            }
            //newlist.push(dict11)

            // for(a=0;a<newlist.length;a++){

            // console.log(newlist[a])

            // if (subcategorylist1.includes(newlist[a])){
            //      console.log('true')
                // console.log(newlist[a], )
                // newlist2.push(newlist[a])
            // }
            // }
            //console.log(newlist2)

            // var n = fruits.includes("Mango");
            // for(i=0;i<subcategorylist1.length;i++){
            //     if(list1[i].category == subcategorylist1[i].category ){
            //         console.log(list1[i].category, subcategorylist1[i].category )
            //     }
            // }
        }
        //  console.log('subcategorylist', subcategorylist1)
         //console.log('subcategorylist1', subcategorylist1)

        // console.log('subcategorylist', subcategorylist)
        // console.log('list1', list1)

        // for(i=0; i<list1.length; i++){

        //     if(subcategorylist[i].category == category ){
        //         console.log("yahhhh", subcategorylist[i].category, category, list1[i].subcategory, list1[i].category)
        //         // list1[b].subcategory


        //     }

        // }


        // for(a=0; a<list1.length; a++){
        //     if (subcategorylist[i].category == category){
        //         console.log(category,subcategorylist[i] )

        //     }

        // }

    //}


// console.log(category, categoryid)
}

function AddItems1(category, categoryid, subcategory, subcategoryid, size, sex ){

    "{{i.name}}", "{{a.name}}", "F", "{{i.id}}{{a.id}}"
    qs = "#"+size+sex + categoryid + subcategoryid
    // mf = "#mf" + categoryid + subcategoryid
    // lf = "#lf" + categoryid + subcategoryid
    // xlf = "#xlf" + categoryid + subcategoryid

    // sm = "#sm" + categoryid + subcategoryid
    // mm = "#mm" + categoryid + subcategoryid
    // lm = "#lm" + categoryid + subcategoryid
    // xlm = "#xlm" + categoryid + subcategoryid
    // if (sex == M){
    //     qs = document.querySelector()
    // }
    qs = document.querySelector(qs).innerHTML
    document.querySelector('#editcategoryid').innerHTML = categoryid
    document.querySelector('#editsubcategoryid').innerHTML = subcategoryid
    document.querySelector('#editsex').innerHTML = sex
    document.querySelector('#editsize').innerHTML = size

    qs1 = document.querySelector('#editstock').value = qs


    console.log(qs)
    //console.log('okkk', category,categoryid, subcategory, subcategoryid, size, sex)


}

function sexDetails(category, subcategory, categoryid, subcategoryid){
    console.log(category, subcategory)
    M = 0
    F = 0
    for(i=0;i<list1.length;i++){

        if(list1[i].subcategory == subcategory){
            console.log(list1[i].subcategory)
            if (list1[i].sex == 'M'){
               M = M + Number(list1[i].stock)
               data = '#sexm' + categoryid + subcategoryid
               document.querySelector(data).innerHTML = M
            }
            if (list1[i].sex == 'F'){
               F = F + Number(list1[i].stock)
               data = '#sexf' + categoryid + subcategoryid
               document.querySelector(data).innerHTML = F
            }
            console.log(M, F)
        }
    }




}

function categoryChange(category, subcategory, sex, id){
    console.log(category, subcategory, sex, id)
    for(i=0;i<list1.length;i++){
        category1 = list1[i].category
        subcategory1 = list1[i].subcategory
        sex1 = list1[i].sex
        size1 = list1[i].size
        stock = list1[i].stock
        id1 = list1[i].id
        sf = "#sf"+id
        mf = "#mf"+id
        lf = "#lf"+id
        xlf = "#xlf"+id

        sm = "#sm"+id
        mm = "#mm"+id
        lm = "#lm"+id
        xlm = "#xlm"+id

        // s1 = document.querySelector(s).innerHTML
        // m1 = document.querySelector(m).innerHTML
        // l1 = document.querySelector(l).innerHTML
        // xl1 = document.querySelector(xl).innerHTML
        // console.log(s1, m1, l1, xl1)
        if(category == category1 ){
            if(subcategory == subcategory1 ){
                if(sex==sex1){
                console.log('yeahh', category, subcategory, sex1, size1, stock)
                if(size1=='S'){

                    if(sex1 == 'F'){
                        document.querySelector(sf).innerHTML = stock
                    }
                    else if(sex1 == 'M'){
                        document.querySelector(sm).innerHTML = stock
                    }



                }
                else if(size1=='M'){

                    if(sex1 == 'F'){
                        document.querySelector(mf).innerHTML = stock
                    }
                    else if(sex1 == 'M'){
                        document.querySelector(mm).innerHTML = stock
                    }

                }
                else if(size1=='L'){
                    // document.querySelector(l).innerHTML = stock
                    if(sex1 == 'F'){
                        document.querySelector(lf).innerHTML = stock
                    }
                    else if(sex1 == 'M'){
                        document.querySelector(lm).innerHTML = stock
                    }
                }
               else if(size1=='XL'){
                    console.log('extralarge')
                    // document.querySelector(xl).innerHTML = stock
                    if(sex1 == 'F'){
                        document.querySelector(xlf).innerHTML = stock
                    }
                    else if(sex1 == 'M'){
                        document.querySelector(xlm).innerHTML = stock
                    }

                }


                }

            }


        }
    //   obj1 =  Object.keys(obj)[1]
    //   console.log(getKeyByValue(dict1,"2"));
      //  console.log('yhhhh', category, subcategory,sex,size)
        // console.log(obj1)
        // console.log(Object.keys(list1[i])[0])
    }

}
function category(){

}

function subcategory(){

}
function subcategory(){

}


</script>



{% endblock body %}

</body>

</html>
